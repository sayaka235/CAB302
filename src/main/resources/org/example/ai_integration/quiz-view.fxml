<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.ai_integration.controls.QuizController"
            prefWidth="820" prefHeight="640">

    <center>
        <StackPane fx:id="rootStack" BorderPane.alignment="CENTER">
            <VBox fx:id="uploadCard" spacing="14" alignment="CENTER" maxWidth="620" styleClass="card">
                <VBox alignment = "TOP_LEFT">
                    <Button onAction="#goToDashBoard" text="Home" style="-fx-background-color: #054fb9; -fx-text-fill: white; -fx-background-radius: 5;"/>
                </VBox>
                <Label text="AI Study Tool - Quiz Section" styleClass="title"/>
                <Label text="Upload your study materials to generate a personalized quiz" styleClass="muted"/>

                <VBox fx:id="dropZone" spacing="8" alignment="CENTER" maxWidth="560" minHeight="180"
                      styleClass="dropzone">
                    <Label text="⬆" styleClass="uploadIcon"/>
                    <Label text="Drop your file here or click to browse" styleClass="subtitle"/>
                    <Label text="Supports PDF, DOCX, TXT, MD files" styleClass="mutedSmall"/>
                    <Button fx:id="uploadButton" text="Browse…" styleClass="ghost-btn"/>
                </VBox>

                <HBox alignment="CENTER" spacing="6">
                    <Label text="Number of Questions:"/>
                    <Spinner fx:id="questionCountSpinner" editable="true"
                             min="1" max="20" initialValue="5"
                             maxWidth="100"/>
                </HBox>
                <TextField fx:id="quizTitleField" promptText="Enter quiz title" maxWidth="400"/>
                <HBox alignment="CENTER" spacing="6">
                    <Label text="Quiz Image:"/>
                    <Button fx:id="uploadImageButton" text="Choose Image"/>
                    <Label fx:id="imageFileLabel" text="No image selected" styleClass="mutedSmall"/>
                </HBox>

                <Button fx:id="startQuizButton" text="Start Quiz" disable="true" maxWidth="220"
                        styleClass="primary-btn"/>
                <Label fx:id="uploadHint" text="Please upload a file to start the quiz" styleClass="mutedSmall"/>
            </VBox>
            <VBox fx:id="quizCard" visible="false" spacing="14" maxWidth="820" styleClass="card">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label fx:id="questionCounterLabel" text="Question 1 of 5" styleClass="eyebrow"/>
                    <Pane HBox.hgrow="ALWAYS"/>
                    <Label fx:id="percentCompleteLabel" text="0% Complete" styleClass="mutedSmall"/>
                </HBox>
                <ProgressBar fx:id="progressBar" prefWidth="1000" progress="0.0"/>

                <Label fx:id="questionLabel" wrapText="true" styleClass="questionText"/>

                <ScrollPane fx:id="resultsScroll" fitToWidth="true" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER">
                    <content>
                        <VBox fx:id="optionsBox" spacing="12" />
                    </content>
                </ScrollPane>

                <HBox spacing="8">
                    <Button fx:id="backButton" text="Back" styleClass="ghost-btn" disable="true"/>
                    <Pane HBox.hgrow="ALWAYS"/>
                    <Button fx:id="nextButton" text="Next" styleClass="primary-btn" disable="true"/>
                </HBox>
            </VBox>

            <VBox fx:id="historyCard" visible="false" spacing="10" maxWidth="820" styleClass="card">
                <Label text="Quiz History" styleClass="title"/>
                <Label text="Your past quiz performances" styleClass="muted"/>
                <ListView fx:id="attemptsList" prefHeight="200"/>
                <Button fx:id="retakeButton" text="Retake Selected"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <Button fx:id="takeNewQuizButton" text="Take New Quiz" styleClass="primary-btn" maxWidth="220"/>
            </VBox>
            <VBox fx:id="loadCard" visible="false" spacing="10" maxWidth="820" styleClass="card">
                <Label text="Generating quiz and notes summary..." styleClass="title"/>
            </VBox>

        </StackPane>
    </center>

    <padding>
        <Insets top="18" right="18" bottom="18" left="18"/>
    </padding>
</BorderPane>
